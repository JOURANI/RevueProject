{% extends 'base.html.twig' %}

{% block body %}
    <style>
        .mt{
            margin-top: 150px;
        }
        .row{
            /*height: 60px;*/
            margin:20px;
        }
    </style>
    {#    <div class="container mt">#}
    {#        <div class="title">#}
    {#            <h1 class="badge-primary text-center mb-5">Editer L'article</h1>#}
    {#        </div>#}

    {#        <div class="row">#}
    {#            <div class="col-10">#}
    {#                <div class="row">#}
    {#                    <div class="col-md-3"><label for="titre">Le Titre</label></div>#}
    {#                    <div class="col-md-6">{{ (article.title) }}</div>#}
    {#                </div>#}
    {#                <div class="row">#}
    {#                    <div class="col-md-3"><label for="size">La Taille</label></div>#}
    {#                    <div class="col-md-6">{{ (article.size) }}</div>#}
    {#                </div>#}
    {#                <div class="row">#}
    {#                    <div class="col-md-3"><label for="resume">La RÃ©sumer</label></div>#}
    {#                    <div class="col-md-6">{{ (article.Resume) }}</div>#}
    {#                </div>#}

    {#                <div class="row">#}
    {#                    <div class="col-md-3"><label for="content">Le Contenue</label></div>#}
    {#                    <div class="col-md-6">{{ (article.Content) }}</div>#}

    {#                </div>#}
    {#                <div class="row">#}
    {#                    <div class="col-md-3"><label for="date">La date de publication de l'article</label></div>#}
    {#                    <div class="col-md-6">{{ (article.CreatedAt|date) }}</div>#}
    {#                </div>#}


    {#                <button type="submit" class="btn btn-primary"> Edit</button>#}
    {#            </div>#}
    {#        </div>#}

    {#        #}
    {#    </div>#}

    {###########################################################################}
    <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body {
            font-family: 'Varela Round', sans-serif;
        }
        .modal-confirm {
            color: #636363;
            width: 425px;
            margin: 30px auto;
        }
        .modal-confirm .modal-content {
            padding: 20px;
            border-radius: 5px;
            border: none;
        }
        .modal-confirm .modal-header {
            border-bottom: none;
            position: relative;
        }
        .modal-confirm h4 {
            text-align: center;
            font-size: 26px;
            margin: 30px 0 -15px;
        }
        .modal-confirm .form-control, .modal-confirm .btn {
            min-height: 40px;
            border-radius: 3px;
        }
        .modal-confirm .close {
            position: absolute;
            top: -5px;
            right: -5px;
        }
        .modal-confirm .modal-footer {
            border: none;
            text-align: center;
            border-radius: 5px;
            font-size: 13px;
        }
        .modal-confirm .icon-box {
            color: #fff;
            position: absolute;
            margin: 0 auto;
            left: 0;
            right: 0;
            top: -70px;
            width: 95px;
            height: 95px;
            border-radius: 50%;
            z-index: 9;
            background: #ec1931;
            padding: 15px;
            text-align: center;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
        }
        .modal-confirm .icon-box i {
            font-size: 58px;
            position: relative;
            top: 3px;
        }
        .modal-confirm.modal-dialog {
            margin-top: 250px!important;
        }
        .modal-confirm .btn {
            color: #fff;
            border-radius: 4px;
            background: #ec1931;
            text-decoration: none;
            transition: all 0.4s;
            line-height: normal;
            border: none;
        }
        .modal-confirm .btn:hover, .modal-confirm .btn:focus {
            background: #ec1931;
            outline: none;
        }
        .trigger-btn {
            display: inline-block;
            margin: 100px auto;
        }
    </style>
    {###########################################################################}
    {########################      Perfect Block      ##########################}
    {###########################################################################}

    <div class="container mt jumbotron">
        <div class="title">
            <h1 class="text-center mb-5 text-muted font-weight-bold">L'article</h1>
        </div>
        <div class="row">
            <div class="col-lg-4  mf-6"><label for="titre">Le Titre</label></div>
            <div class="col-lg-8">{{ (articles.title) }}</div>
        </div>
        <div class="row">
            <div class="col-lg-4"><label for="keyword">keyword</label></div>
            <div class="col-lg-8">{{ (articles.keyword) }}</div>
        </div>
        <div class="row">
            <div class="col-lg-4"><label for="abstract">L'abstract</label></div>
            <div class="col-lg-8">{{ (articles.abstract) }}</div>
        </div>
        <div class="row">
            <div class="col-lg-4"><label for="content">Le Contenue</label></div>
            <div class="col-lg-8">{{ (articles.Content) }}</div>
        </div>
        <div class="row">
            <div class="col-lg-4"><label for="size">La size</label></div>
            <div class="col-lg-8">{{ (articles.size) }}</div>
        </div>

        <div class="row">
            <div class="col-lg-4"><label for="revue">Le revue</label></div>
                <div class="col-lg-8">
                    {% for revue in revues %}
                        {% if (revue.id) is same as (articles.revue.id) %}
                            {{ revue.nomRevue }}
                        {% endif %}
                    {% endfor %}
                </div>
        </div>
        <div class="row">
            <div class="col-lg-4"><label for="categorie">La categorie</label></div>
                <div class="col-lg-8">
                    {% for category in categories %}
                        {% if (category.id) is same as (articles.categorie.id) %}
                            {{ category.nomCategorie }}
                        {% endif %}
                    {% endfor %}
                </div>
        </div>


        <div class="row">
            <div class="col-lg-12">
                    <div class="title">
                        <h1 class="text-center mb-5 text-muted font-weight-bold">les Auteurs de cet article</h1>
                    </div>
                    {# TODO AFFICHER LA LISTE DES AUTEUR LIER A CETTE ARTICLE#}
                    <div class="row border border-dark  full-width text-light bg-dark m-0">
                        <div class="col-md-3">
                            nomAuteur
                        </div>
                        <div class="col-md-3">
                          prenomAuteur
                        </div>
                        <div class="col-md-3">
                            NomIns
                        </div>
                        <div class="col-md-3">
                            adresseIns
                        </div>
                        </div>
                    {% for auteur in auteurs %}
                        <div class="row border-warning  border-bottom border-left  full-width m-0 {#mt-0#} ">
                        <div class="col-md-3 border-warning  border-right">
                            {{ (auteur.nomAuteur) }}
                        </div>
                        <div class="col-md-3 border-warning  border-right">
                            {{ (auteur.prenomAuteur) }}
                        </div>
                        <div class="col-md-3 border-warning  border-right">
                            {{ (auteur.NomIns) }}
                        </div>
                        <div class="col-md-3 border-warning  border-right">
                            {{ (auteur.adresseIns) }}
                        </div>
                    </div>
                    {% endfor %}
            </div>
        </div>


        <div class="row">
            {# todo Create Extention twig repeat to duplicate &nbsp  https://symfony.com/doc/4.4/templating/twig_extension.html #}
            <p  style="margin-top: 50px">
                <a href="{{ path('article-edit',{id:articles.id}) }}"  class="btn btn-primary mr-4">&nbsp&nbsp Edit &nbsp&nbsp</a>
                <a href="#myModal" class="btn btn-danger mr-4 trigger-btn" data-toggle="modal">Delete</a>
                  {# Todo sweetAleart don't stop delete still need figurat it out #}
                  {# <a href="{{ path('article-delete',{'id':articles.id}) }}" class="btn btn-danger" onclick="return sweetAlert();">Delete</a> #}
            </p>
        </div>
    </div>

    {#########################################################################################################}
    {# https://www.tutorialrepublic.com/codelab.php?topic=bootstrap-3&file=simple-success-confirmation-popup #}
    {#########################################################################################################}
    <!-- Modal HTML -->
    <div id="myModal" class="modal fade">
        <div class="modal-dialog modal-confirm">
            <div class="modal-content">
                <div class="modal-header flex-column">
                    <div class="icon-box">
                        <i class="material-icons">&#xE5CD;</i>
                        <i class="material-icons">&#xE3C9;</i>
                    </div>
                    <h4 class="modal-title w-100">Are you sure?</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Do you really want to edit these records? This process cannot be undone.</p>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="{{ path('article-delete',{'id':articles.id}) }}" class="btn btn-danger">Delete</a>

                </div>
            </div>
        </div>
    </div>

{% endblock %}
    {###########################################################################}
    {#############         SweatAlert Confirmation Modale          #############}
    {###########################################################################}
{% block javascripts %}
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        function sweetAlert() {
            swal({
                title: "Are you sure?",
                text: "Once deleted, you will not be able to recover this record !",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        swal("Poof! Your imaginary record has been deleted!", {
                            icon: "success",
                        });
                    } else {
                        swal("Your imaginary file is safe!");
                    }
                });
        }
    </script>
{% endblock %}
